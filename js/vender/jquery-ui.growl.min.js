/**
 * @name	jquery-ui.growl.js
 * @version	0.1 6-apr-2010
 * @author	Jaap Moolenaar, Websteen.nl

 * A plugin for jQuery UI to show Mac OS type Growls
 */
$.WsGrowl={opt:{title:false,content:false,timeout:2000,dialogMargin:10,hideSpeed:350,dialog:{}},aGrowls:[],bAnimating:false,show:function(options){var opt=$.extend({},this.opt,options);if(!opt.content)return false;var iNewGrowlID='Growl_'+Math.floor(Math.random()*100);var newGrowl=$('<div id="'+iNewGrowlID+'"></div>').html(opt.content).appendTo($('body')).hide();newGrowl.data('opt',opt);newGrowl.data('gid',iNewGrowlID);var oDialogOpts={resizable:false,draggable:false,position:['right','bottom'],open:function(e,ui){var $this=$(this);if(!opt.title)
{var oTitle=$this.parent().find('.ui-dialog-titlebar');var iTitleHeight=oTitle.outerHeight();oTitle.hide();$this.parent().animate({top:'+='+iTitleHeight},0);}
var iTop=$this.parent().position().top-opt.dialogMargin;$.each($.WsGrowl.aGrowls,function(){iTop-=(this.parent().outerHeight()+opt.dialogMargin);});$this.parent().animate({top:iTop},0);setTimeout(function(){$this.dialog('close');},opt.timeout);},beforeClose:function(e,ui){var $this=$(this);var iThisID=$this.data('gid');var iThisHeight=$this.parent().outerHeight();$this.parent().animate({height:0,top:'+='+iThisHeight,opacity:0.2},{duration:opt.hideSpeed,complete:function(){$(this).remove();$.WsGrowl.repos();}});var iKeyToRemove=0;$.each($.WsGrowl.aGrowls,function(iKey){if($(this).is('#'+iThisID))iKeyToRemove=iKey;});$.WsGrowl.aGrowls.splice(iKeyToRemove,1);return false;}};if(opt.title)
{oDialogOpts.title=opt.title;}
oDialogOpts=$.extend({},opt.dialog,oDialogOpts);newGrowl.dialog(oDialogOpts);this.aGrowls.push(newGrowl);return newGrowl;},repos:function(){if(!this.bAnimating)
{this.bAnimating=true;var wnd=$(window);var iTop=wnd.height()+wnd.scrollTop();$.each($.WsGrowl.aGrowls,function(){this.parent().stop(true,true);iTop-=this.parent().outerHeight()+this.data('opt').dialogMargin;this.parent().animate({top:iTop},{duration:450,stack:false});});this.bAnimating=false;}}};$.fn.WsGrowl=function(options){return $(this).each(function(){if($(this).attr('title'))options.title=$(this).attr('title');options.content=$(this).html();$.WsGrowl.show(options);});};$(window).scroll(function(){$.WsGrowl.repos();});